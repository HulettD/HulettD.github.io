<!DOCTYPE html>
<html id="root" lang="en" data-bs-theme="dark">

<head>
	<title>Feedback</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
	<style>
		datalist {
			display: flex;
			flex-direction: row;
			justify-content: space-between;
		}
	</style>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
		crossorigin="anonymous"></script>
	<script>
		document.addEventListener("DOMContentLoaded", function (e) {
			// TODO: Utilize localStorage to persist theme across pages
			localStorage.setItem("theme", "dark");
			const root = document.getElementById("root");
			const themeToggle = document.getElementById("theme-toggle");
			const themeIcon = themeToggle.firstElementChild;
			const lightMode = document.getElementById("light-mode");
			const darkMode = document.getElementById("dark-mode");
			function toggleTheme (setLight, setLocalStorage) {
				if (setLight) {
					themeIcon.classList.replace("fa-sun", "fa-moon");
					root.setAttribute("data-bs-theme", "light");
				} else {
					themeIcon.classList.replace("fa-moon", "fa-sun");
					root.setAttribute("data-bs-theme", "dark");
				}
				if (setLocalStorage)
					setLight ? localStorage.setItem("theme", "light") : localStorage.setItem("theme", "dark");
			}
			document.getElementById("theme-toggle").addEventListener("click", function (e) {
				const isDark = document.getElementById("root").getAttribute("data-bs-theme") == "dark";
				toggleTheme(isDark, true);
			});
			lightMode.addEventListener("click", function (e) {
				toggleTheme(true, true);
			});
			lightMode.addEventListener("mouseover", function (e) {
				toggleTheme(true, false);
			});
			lightMode.addEventListener("mouseout", function (e) {
				const setLight = localStorage.getItem("theme") == "light";
				toggleTheme(setLight, false);
			});
			darkMode.addEventListener("click", function (e) {
				toggleTheme(false, true);
			});
			darkMode.addEventListener("mouseover", function (e) {
				toggleTheme(false, false);
			});
			darkMode.addEventListener("mouseout", function (e) {
				const setLight = localStorage.getItem("theme") == "light";
				toggleTheme(setLight, false);
			});
		});
	</script>
	<script>
		document.addEventListener("DOMContentLoaded", function (event) {
			const ratingInput = document.getElementById("rating");
			ratingInput.addEventListener("change", function (e) {
				const min = ratingInput.getAttribute("min");
				const max = ratingInput.getAttribute("max");
				const selected = ratingInput.value;
				let stars = "";
				for (let i = min - 1; i < selected; i++)
					stars += "\u{2605}";
				for (let i = selected; i < max; i++)
					stars += "\u{2606}";
				document.getElementById("stars").innerHTML = stars;
			});

			document.getElementById("FeedbackForm").addEventListener("submit", function (e) {
				e.preventDefault();
				const wordCount = document.getElementById("feedback").value.split(' ').filter(function (n) { return n != '' }).length;
				const rating = parseInt(ratingInput.value);
				let ratingFeedback = ""
				switch (rating) {
					case 1:
						ratingFeedback = `only ${rating} star?! ;(`;
						break;
					case 2:
						ratingFeedback = `only ${rating} stars? :(`;
						break;
					case 3:
						ratingFeedback = `${rating} stars? :|`;
						break;
					case 4:
						ratingFeedback = `${rating} stars? :)`;
						break;
					case 5:
						ratingFeedback = `${rating} stars! :D`;
						break;
					default:
						ratingFeedback = `hmm, no rating?`;
						break;
				}
				alert(`${wordCount} word${wordCount == 0 || wordCount > 1 ? "s" : ""} of feedback, ${ratingFeedback}`);
				e.currentTarget.submit();
			});
		});
	</script>
</head>

<body>
	<nav class="navbar bg-body-tertiary mb-4">
		<div class="container-fluid">
			<span class="navbar-brand mb-0 h1">464 Course Project</span>
			<div class="btn-group dropstart">
				<button type="button" class="btn btn-outline-secondary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-expanded="false">
					<span class="visually-hidden">Toggle Dropdown</span>
				</button>
				<button id="theme-toggle" type="button" class="btn btn-outline-secondary"><i class="fa-solid fa-fw fa-sun"></i></button>
				<ul class="dropdown-menu">
				  <li><a id="light-mode" class="dropdown-item" href="#">Light mode</a></li>
				  <li><a id="dark-mode" class="dropdown-item" href="#">Dark mode</a></li>
				</ul>
			  </div>
		</div>
	</nav>
	<header class="container-fluid px-5 mb-5 text-center">
		<h1>Feedback</h1>
		<hr />
	</header>
	<main class="container">
		<div class="card">
			<div class="card-header">
				<h3>Constructive Criticism Form</h1>
			</div>
			<div class="card-body">
				<form id="FeedbackForm" name="FeedbackForm">
					<div class="mb-4">
						<label for="email" class="form-label">Email</label>
						<input required type="email" id="email" name="email" class="form-control" />
					</div>
					<div class="mb-4">
						<label for="rating" class="form-label">Rating (<span
								id="stars">&starf;&starf;&starf;&starf;&starf;</span>)</label><br />
						<input class="form-range" type="range" id="rating" name="rating" list="values" min="1" max="5"
							step="1" value="5" />
						<datalist id="values">
							<option value="1" label="1"></option>
							<option value="2" label="2"></option>
							<option value="3" label="3"></option>
							<option value="4" label="4"></option>
							<option value="5" label="5"></option>
						</datalist>
					</div>
					<div class="mb-4">
						<label for="feedback" class="form-label">Feedback</label>
						<textarea id="feedback" name="feedback" class="form-control"></textarea>
					</div>
				</form>
			</div>
			<div class="card-footer">
				<button form="FeedbackForm" type="submit" class="btn btn-success w-100">Submit</button>
			</div>
		</div>
	</main>
</body>

</html>
